{% extends 'layout.html' %}

{% block title %}Upload Statements - Spend Analysis{% endblock %}

{% block content %}
<div class="page-container">
    <div class="welcome-section">
        <h1>Financial Insights at Your Fingertips</h1>
        <p>Upload your bank statement and get powerful insights about your spending habits</p>
        <div class="action-links">
            <a href="#upload" class="btn-primary">Upload Statement</a>
            <a href="/dashboard" class="btn-secondary">View Dashboard</a>
        </div>
    </div>

    <div id="upload" class="upload-container">
        <h2>Upload Your Bank Statement</h2>
        <p>Drag and drop your PDF statement below to begin analysis</p>
        
        <form action="/upload" method="post" enctype="multipart/form-data">
            <div class="file-upload-area" id="drop-area">
                <i class="fas fa-cloud-upload-alt"></i>
                <p>Drag & Drop files here or click to select</p>
                <p class="file-name">No file selected</p>
                <input type="file" name="file" id="file-input" accept=".pdf" style="display: none;">
            </div>
            
            <button type="submit" class="btn-primary">
                <i class="fas fa-upload"></i> Upload & Analyze
            </button>
        </form>
    </div>
    
    <div class="features-section">
        <h2>Key Features</h2>
        
        <div class="features-grid">
            <div class="feature-card">
                <i class="fas fa-chart-pie"></i>
                <h3>Spending Categories</h3>
                <p>See exactly where your money is going with auto-categorized expenses</p>
            </div>
            
            <div class="feature-card">
                <i class="fas fa-chart-line"></i>
                <h3>Spending Trends</h3>
                <p>Track how your spending changes over time and identify patterns</p>
            </div>
            
            <div class="feature-card">
                <i class="fas fa-money-bill-wave"></i>
                <h3>Budget Analysis</h3>
                <p>Compare income vs. expenses and track your savings rate</p>
            </div>
            
            <div class="feature-card">
                <i class="fas fa-lightbulb"></i>
                <h3>Smart Forecasts</h3>
                <p>Predict future spending based on your historical patterns</p>
            </div>
        </div>
    </div>
    
    <div class="info-section">
        <h2>Supported Banks</h2>
        <div class="banks-list">
            <span>Chase</span>
            <span>Bank of America</span>
            <span>Wells Fargo</span>
            <span>Citi</span>
            <span>Capital One</span>
        </div>
        
        <h2>Privacy Notice</h2>
        <p>Your data is processed locally and never stored on external servers. All analysis happens in your browser.</p>
        
        <div class="action-links">
            <a href="/dashboard" class="btn-secondary">View Sample Dashboard</a>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const fileInput = document.getElementById('file-input');
        const fileLabel = document.querySelector('.file-name');
        const uploadArea = document.querySelector('.file-upload-area');
        
        if (fileInput && uploadArea) {
            uploadArea.addEventListener('click', () => {
                fileInput.click();
            });
            
            fileInput.addEventListener('change', (e) => {
                if (fileInput.files.length) {
                    fileLabel.textContent = fileInput.files[0].name;
                    fileLabel.classList.add('file-selected');
                }
            });
            
            // Drag and drop functionality
            uploadArea.addEventListener('dragover', (e) => {
                e.preventDefault();
                uploadArea.classList.add('dragover');
            });
            
            uploadArea.addEventListener('dragleave', () => {
                uploadArea.classList.remove('dragover');
            });
            
            uploadArea.addEventListener('drop', (e) => {
                e.preventDefault();
                uploadArea.classList.remove('dragover');
                
                if (e.dataTransfer.files.length) {
                    fileInput.files = e.dataTransfer.files;
                    if (fileInput.files[0]) {
                        fileLabel.textContent = fileInput.files[0].name;
                        fileLabel.classList.add('file-selected');
                    }
                }
            });
        }
        
        // Smooth scroll for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function(e) {
                e.preventDefault();
                
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    window.scrollTo({
                        top: target.offsetTop - 80,
                        behavior: 'smooth'
                    });
                }
            });
        });
    });
</script>
{% endblock %}
